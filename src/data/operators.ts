import type { Operator } from '@/types'

export const OPERATORS: Operator[] = [
  // === BASIC OPERATORS ===
  {
    id: 'exact-phrase',
    name: 'Eksakt frase',
    syntax: '"søkeord"',
    description: 'Finn nøyaktig denne frasen',
    example: '"klimaendringer i Norge"',
    exampleResult: 'Finner sider med nøyaktig denne frasen',
    category: 'basic',
    platforms: ['google', 'github', 'scholar', 'pubmed', 'nb', 'archive'],
    level: 'beginner',
  },
  {
    id: 'or',
    name: 'Eller',
    syntax: 'A OR B',
    description: 'Finn sider med enten A eller B',
    example: 'hund OR katt',
    exampleResult: 'Finner sider som nevner hund eller katt',
    category: 'basic',
    platforms: ['google', 'github', 'scholar', 'pubmed', 'nb'],
    level: 'beginner',
  },
  {
    id: 'exclude',
    name: 'Ekskluder',
    syntax: '-ord',
    description: 'Utelat resultater med dette ordet',
    example: 'python -slange',
    exampleResult: 'Finner Python (programmeringsspråk), ikke slangen',
    category: 'basic',
    platforms: ['google', 'github', 'scholar', 'shodan', 'nb'],
    level: 'beginner',
  },
  {
    id: 'wildcard',
    name: 'Jokertegn',
    syntax: '*',
    description: 'Erstatter ett eller flere ord',
    example: '"beste * i Oslo"',
    exampleResult: 'Finner "beste restaurant i Oslo", "beste kafé i Oslo" osv.',
    category: 'basic',
    platforms: ['google', 'nb'],
    level: 'beginner',
  },
  {
    id: 'group',
    name: 'Gruppering',
    syntax: '(A OR B) C',
    description: 'Grupper søkeord logisk',
    example: '(hund OR katt) mat',
    exampleResult: 'Finner hundemat eller kattemat',
    category: 'basic',
    platforms: ['google', 'github', 'shodan', 'nb'],
    level: 'advanced',
  },

  // === SITE/FILTER OPERATORS ===
  {
    id: 'site',
    name: 'Søk på nettsted',
    syntax: 'site:domene.no',
    description: 'Søk kun på et bestemt nettsted',
    example: 'site:vg.no klima',
    exampleResult: 'Finner sider om klima kun på VG',
    category: 'site',
    platforms: ['google'],
    level: 'beginner',
  },
  {
    id: 'inurl',
    name: 'I URL',
    syntax: 'inurl:tekst',
    description: 'Finn sider med dette i URL-en',
    example: 'inurl:login',
    exampleResult: 'Finner alle innloggingssider',
    category: 'site',
    platforms: ['google'],
    level: 'advanced',
  },
  {
    id: 'intitle',
    name: 'I tittel',
    syntax: 'intitle:tekst',
    description: 'Finn sider med dette i tittelen',
    example: 'intitle:"årsrapport 2025"',
    exampleResult: 'Finner sider med årsrapport 2025 i tittelen',
    category: 'site',
    platforms: ['google'],
    level: 'advanced',
  },
  {
    id: 'allintitle',
    name: 'Alt i tittel',
    syntax: 'allintitle:ord1 ord2',
    description: 'Alle ord må være i tittelen',
    example: 'allintitle:klima rapport Norge',
    exampleResult: 'Finner sider der alle tre ord er i tittelen',
    category: 'site',
    platforms: ['google'],
    level: 'advanced',
  },
  {
    id: 'intext',
    name: 'I tekst',
    syntax: 'intext:tekst',
    description: 'Finn sider med dette i brødteksten',
    example: 'intext:"konfidensielt"',
    exampleResult: 'Finner sider med ordet konfidensielt i teksten',
    category: 'site',
    platforms: ['google'],
    level: 'advanced',
  },
  {
    id: 'related',
    name: 'Relaterte sider',
    syntax: 'related:url',
    description: 'Finn lignende nettsteder',
    example: 'related:nrk.no',
    exampleResult: 'Finner nettsteder lignende NRK',
    category: 'site',
    platforms: ['google'],
    level: 'advanced',
  },
  {
    id: 'cache',
    name: 'Hurtigbuffer',
    syntax: 'cache:url',
    description: 'Se Googles lagrede versjon',
    example: 'cache:example.com',
    exampleResult: 'Viser Googles bufrede versjon av siden',
    category: 'site',
    platforms: ['google'],
    level: 'expert',
  },

  // === FILE OPERATORS ===
  {
    id: 'filetype',
    name: 'Filtype',
    syntax: 'filetype:pdf',
    description: 'Finn spesifikke filtyper',
    example: 'årsrapport filetype:pdf',
    exampleResult: 'Finner årsrapporter i PDF-format',
    category: 'file',
    platforms: ['google'],
    level: 'beginner',
  },
  {
    id: 'ext',
    name: 'Filendelse',
    syntax: 'ext:xlsx',
    description: 'Alternativ syntaks for filtype',
    example: 'budsjett ext:xlsx',
    exampleResult: 'Finner Excel-filer med budsjett',
    category: 'file',
    platforms: ['google'],
    level: 'advanced',
  },

  // === DATE OPERATORS ===
  {
    id: 'before',
    name: 'Før dato',
    syntax: 'before:YYYY-MM-DD',
    description: 'Resultater fra før denne datoen',
    example: 'covid before:2020-03-01',
    exampleResult: 'Finner covid-innhold fra før mars 2020',
    category: 'date',
    platforms: ['google'],
    level: 'advanced',
  },
  {
    id: 'after',
    name: 'Etter dato',
    syntax: 'after:YYYY-MM-DD',
    description: 'Resultater fra etter denne datoen',
    example: 'AI after:2024-01-01',
    exampleResult: 'Finner AI-innhold fra 2024 og nyere',
    category: 'date',
    platforms: ['google'],
    level: 'advanced',
  },

  // === ADVANCED OPERATORS ===
  {
    id: 'around',
    name: 'Nærhet',
    syntax: 'AROUND(n)',
    description: 'Finn ord innenfor n ord fra hverandre',
    example: 'klima AROUND(3) krise',
    exampleResult: 'Finner "klima" og "krise" nær hverandre',
    category: 'advanced',
    platforms: ['google'],
    level: 'expert',
  },
  {
    id: 'define',
    name: 'Definisjon',
    syntax: 'define:ord',
    description: 'Få definisjon av et ord',
    example: 'define:epistemologi',
    exampleResult: 'Viser definisjon av epistemologi',
    category: 'advanced',
    platforms: ['google'],
    level: 'beginner',
  },

  // === NASJONALBIBLIOTEKET OPERATORS ===
  {
    id: 'nb-proximity',
    name: 'Nærhetssøk',
    syntax: '"ord ord"~N',
    description: 'Finn ord nær hverandre (N ord mellom)',
    example: '"Ibsen Bjørnson"~5',
    exampleResult: 'Finner Ibsen og Bjørnson innen 5 ord fra hverandre',
    category: 'advanced',
    platforms: ['nb'],
    level: 'advanced',
  },
  {
    id: 'nb-fuzzy',
    name: 'Fuzzy-søk',
    syntax: 'ord~N',
    description: 'Finn stavevarianter (N = antall endringer)',
    example: 'Larsen~1',
    exampleResult: 'Finner Larsen, Larson, Larssen, Lassen',
    category: 'advanced',
    platforms: ['nb'],
    level: 'advanced',
  },
  {
    id: 'nb-title',
    name: 'Tittel',
    syntax: 'title:tekst',
    description: 'Søk kun i tittel',
    example: 'title:Ibsen',
    exampleResult: 'Finner verk med Ibsen i tittelen',
    category: 'filter',
    platforms: ['nb'],
    level: 'beginner',
  },
  {
    id: 'nb-freetext',
    name: 'Fritekst',
    syntax: 'freetext:tekst',
    description: 'Søk kun i indeksert fritekst, ikke metadata',
    example: 'freetext:"collett vogt"',
    exampleResult: 'Søker i fulltekst, ikke metadata',
    category: 'filter',
    platforms: ['nb'],
    level: 'advanced',
  },
  {
    id: 'nb-creator',
    name: 'Forfatter',
    syntax: 'creator:navn',
    description: 'Søk etter forfatter/skaper',
    example: 'creator:Hamsun',
    exampleResult: 'Finner verk av Knut Hamsun',
    category: 'filter',
    platforms: ['nb'],
    level: 'beginner',
  },
  {
    id: 'nb-year',
    name: 'År',
    syntax: 'year:YYYY',
    description: 'Filtrer på utgivelsesår',
    example: 'year:1890',
    exampleResult: 'Finner verk fra 1890',
    category: 'date',
    platforms: ['nb'],
    level: 'beginner',
  },
  {
    id: 'nb-mediatype',
    name: 'Medietype',
    syntax: 'mediatype:type',
    description: 'Filtrer på type materiale',
    example: 'mediatype:aviser',
    exampleResult: 'Søker kun i aviser',
    category: 'filter',
    platforms: ['nb'],
    level: 'beginner',
  },

  // === SHODAN OPERATORS ===
  {
    id: 'shodan-port',
    name: 'Port',
    syntax: 'port:nummer',
    description: 'Søk etter åpne porter',
    example: 'port:22',
    exampleResult: 'Finner enheter med SSH-port åpen',
    category: 'security',
    platforms: ['shodan'],
    level: 'expert',
  },
  {
    id: 'shodan-country',
    name: 'Land',
    syntax: 'country:XX',
    description: 'Filtrer på landkode',
    example: 'country:NO',
    exampleResult: 'Finner enheter i Norge',
    category: 'filter',
    platforms: ['shodan'],
    level: 'advanced',
  },
  {
    id: 'shodan-city',
    name: 'By',
    syntax: 'city:"bynavn"',
    description: 'Filtrer på by',
    example: 'city:"Oslo"',
    exampleResult: 'Finner enheter i Oslo',
    category: 'filter',
    platforms: ['shodan'],
    level: 'advanced',
  },
  {
    id: 'shodan-org',
    name: 'Organisasjon',
    syntax: 'org:"navn"',
    description: 'Søk etter organisasjon',
    example: 'org:"Telenor"',
    exampleResult: 'Finner enheter tilhørende Telenor',
    category: 'filter',
    platforms: ['shodan'],
    level: 'advanced',
  },
  {
    id: 'shodan-hostname',
    name: 'Vertsnavn',
    syntax: 'hostname:domene',
    description: 'Søk på vertsnavn',
    example: 'hostname:.no',
    exampleResult: 'Finner enheter med norske domener',
    category: 'filter',
    platforms: ['shodan'],
    level: 'advanced',
  },
  {
    id: 'shodan-os',
    name: 'Operativsystem',
    syntax: 'os:"system"',
    description: 'Filtrer på operativsystem',
    example: 'os:"Windows Server 2019"',
    exampleResult: 'Finner Windows Server 2019-systemer',
    category: 'security',
    platforms: ['shodan'],
    level: 'expert',
  },
  {
    id: 'shodan-product',
    name: 'Produkt',
    syntax: 'product:"navn"',
    description: 'Søk etter produkt/tjeneste',
    example: 'product:"nginx"',
    exampleResult: 'Finner nginx-webservere',
    category: 'filter',
    platforms: ['shodan'],
    level: 'advanced',
  },
  {
    id: 'shodan-ssl',
    name: 'SSL-sertifikat',
    syntax: 'ssl:"tekst"',
    description: 'Søk i SSL-sertifikater',
    example: 'ssl:"organisasjon"',
    exampleResult: 'Finner sertifikater med organisasjonsnavnet',
    category: 'security',
    platforms: ['shodan'],
    level: 'expert',
  },
  {
    id: 'shodan-http-title',
    name: 'HTTP-tittel',
    syntax: 'http.title:"tekst"',
    description: 'Søk i websiders tittel',
    example: 'http.title:"Dashboard"',
    exampleResult: 'Finner eksponerte dashboards',
    category: 'security',
    platforms: ['shodan'],
    level: 'expert',
  },

  // === GITHUB OPERATORS ===
  {
    id: 'github-repo',
    name: 'Repository',
    syntax: 'repo:eier/navn',
    description: 'Søk i spesifikt repository',
    example: 'repo:facebook/react hooks',
    exampleResult: 'Søker etter hooks i React-repoet',
    category: 'filter',
    platforms: ['github'],
    level: 'beginner',
  },
  {
    id: 'github-user',
    name: 'Bruker',
    syntax: 'user:brukernavn',
    description: 'Søk i brukers repositories',
    example: 'user:torvalds',
    exampleResult: 'Finner alle repos til Linus Torvalds',
    category: 'filter',
    platforms: ['github'],
    level: 'beginner',
  },
  {
    id: 'github-org',
    name: 'Organisasjon',
    syntax: 'org:orgnavn',
    description: 'Søk i organisasjonens repos',
    example: 'org:microsoft typescript',
    exampleResult: 'Søker i Microsofts repos etter TypeScript',
    category: 'filter',
    platforms: ['github'],
    level: 'beginner',
  },
  {
    id: 'github-language',
    name: 'Språk',
    syntax: 'language:språk',
    description: 'Filtrer på programmeringsspråk',
    example: 'language:python machine learning',
    exampleResult: 'Finner Python-prosjekter om maskinlæring',
    category: 'filter',
    platforms: ['github'],
    level: 'beginner',
  },
  {
    id: 'github-path',
    name: 'Filsti',
    syntax: 'path:sti',
    description: 'Søk i spesifikk mappestruktur',
    example: 'path:src/components',
    exampleResult: 'Finner kode i components-mapper',
    category: 'filter',
    platforms: ['github'],
    level: 'advanced',
  },
  {
    id: 'github-filename',
    name: 'Filnavn',
    syntax: 'filename:navn',
    description: 'Søk etter filer med dette navnet',
    example: 'filename:package.json react',
    exampleResult: 'Finner package.json-filer som nevner react',
    category: 'file',
    platforms: ['github'],
    level: 'advanced',
  },
  {
    id: 'github-extension',
    name: 'Filendelse',
    syntax: 'extension:ext',
    description: 'Søk i filer med denne endelsen',
    example: 'extension:yml kubernetes',
    exampleResult: 'Finner YAML-filer om Kubernetes',
    category: 'file',
    platforms: ['github'],
    level: 'advanced',
  },
  {
    id: 'github-stars',
    name: 'Stjerner',
    syntax: 'stars:>n',
    description: 'Filtrer på antall stjerner',
    example: 'stars:>1000 react',
    exampleResult: 'Finner populære React-prosjekter',
    category: 'filter',
    platforms: ['github'],
    level: 'advanced',
  },

  // === ACADEMIC OPERATORS ===
  {
    id: 'scholar-author',
    name: 'Forfatter',
    syntax: 'author:"navn"',
    description: 'Søk etter forfatter',
    example: 'author:"Einstein"',
    exampleResult: 'Finner artikler av Einstein',
    category: 'filter',
    platforms: ['scholar', 'pubmed'],
    level: 'beginner',
  },
  {
    id: 'scholar-source',
    name: 'Kilde/Journal',
    syntax: 'source:"journalnavn"',
    description: 'Søk i spesifikk journal',
    example: 'source:"Nature"',
    exampleResult: 'Finner artikler fra Nature',
    category: 'filter',
    platforms: ['scholar'],
    level: 'advanced',
  },
  {
    id: 'pubmed-mesh',
    name: 'MeSH-term',
    syntax: '[MeSH Terms]',
    description: 'Bruk medisinske emneord',
    example: 'diabetes[MeSH Terms]',
    exampleResult: 'Søker med standardisert medisinsk terminologi',
    category: 'filter',
    platforms: ['pubmed'],
    level: 'expert',
  },
  {
    id: 'pubmed-title',
    name: 'Tittel',
    syntax: '[Title]',
    description: 'Søk kun i artikkeltittel',
    example: 'cancer[Title]',
    exampleResult: 'Finner artikler med cancer i tittelen',
    category: 'filter',
    platforms: ['pubmed'],
    level: 'advanced',
  },
  {
    id: 'pubmed-abstract',
    name: 'Sammendrag',
    syntax: '[Title/Abstract]',
    description: 'Søk i tittel og sammendrag',
    example: 'covid-19[Title/Abstract]',
    exampleResult: 'Finner artikler som nevner covid-19',
    category: 'filter',
    platforms: ['pubmed'],
    level: 'advanced',
  },
]

export function getOperatorsByPlatform(platformId: string): Operator[] {
  return OPERATORS.filter((op) => op.platforms.includes(platformId as never))
}

export function getOperatorsByCategory(category: string): Operator[] {
  return OPERATORS.filter((op) => op.category === category)
}

export function getOperatorsByLevel(level: string): Operator[] {
  const levels = ['beginner', 'advanced', 'expert']
  const maxIndex = levels.indexOf(level)
  return OPERATORS.filter((op) => levels.indexOf(op.level) <= maxIndex)
}

export function searchOperators(query: string): Operator[] {
  const q = query.toLowerCase()
  return OPERATORS.filter(
    (op) =>
      op.name.toLowerCase().includes(q) ||
      op.syntax.toLowerCase().includes(q) ||
      op.description.toLowerCase().includes(q)
  )
}
